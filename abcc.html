<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- <script type="text/javascript" src="https://maps.google.com/maps/api/geocode/json?latlng=-33.873038,151.20563&sensor=false"></script> -->
	<script src="https://maps.googleapis.com/maps/api/js?callback=Function.prototype"></script>
</head>
<body>
	<div id="map" style="width:100vw; height: 99vh;">
		
	</div>
	<script type="text/javascript">

		// var map1 = new google.maps.Map(document.getElementById('map'), {
		//   center: {lat: -34.397, lng: 150.644},
		//   zoom: 8
		// });
		// new google.maps.Marker({
		//     position: {lat: -34.397, lng: 150.644},
		//     map:map1,
		//   });
		// new google.maps.Circle({
		//     strokeColor: "#FF0000",
		//     strokeOpacity: 0.8,
		//     fillColor: "#FF0000",
		//     fillOpacity: 0.35,
		//     map : map1,
		//     center: new google.maps.LatLng(-34.397, 150.644),
		//     radius:10,
		//   });

		if(!navigator.geolocation)
	    {
	      console.log("Your browser doesnot support Geolocation feature.");
	    }
	    else
	    {
	      // setInterval(() => {
	      //   navigator.geolocation.getCurrentPosition(getposition);
	      // },2000);
	      navigator.geolocation.getCurrentPosition(getposition);
	    }


	    function getposition(position)
	    {      
	      console.log(position);
	      var latitude = position.coords.latitude;
	      var longitude = position.coords.longitude;

	      latlong = { lat: position.coords.latitude, lng: position.coords.longitude};
	      var map1 = new google.maps.Map(document.getElementById("map"), {
	        zoom: 20,
	        center: latlong,
	      });
	      new google.maps.Marker({
	        position: latlong,
	        map:map1,
	      });

	      new google.maps.Circle({
	        strokeColor: "#FF0000",
	        strokeOpacity: 0.8,
	        fillColor: "#FF0000",
	        fillOpacity: 0.35,
	        map : map1,
	        center: new google.maps.LatLng(latitude, longitude),
	        radius:10,
	      });


	      // $.post('calculation.php',{lat: position.coords.latitude, lon: position.coords.longitude},
	      //   function(data)
	      //   {
	      //       console.log(data);
	      //       var arr = data.split(/\s+/);
	      //       var i,latt,longg;
	      //       for(i=2;i<arr.length-1;i=i+2)
	      //       {
	      //         latt=arr[i];
	      //         longg=arr[i+1];
	      //         new google.maps.Marker({
	      //          position: new google.maps.LatLng(latt, longg),
	      //          map: map1,
	      //         });
	      //       }
	      //   });
	    }

	    function notif(){
	    	let permission = Notification.permission;
			if(permission === "granted") {
			   showNotification();
			} else if(permission === "default"){
			   requestAndShowPermission();
			} else {
			  alert("Use normal alert");
			}
	    }
	    function showNotification() {
		   // if(document.visibilityState === "visible") {
		   //     return;
		   // }
		   let title = "JavaScript Jeep";
			let icon = 'https://homepages.cae.wisc.edu/~ece533/images/airplane.png';
			let body = "It's Your boarding time";
			var notification = new Notification(title, { body, icon });
		   // var title = "JavaScript Jeep";
		   // icon = "image-url"
		   // var body = "Message to be displayed";
		   // var notification = new Notification('Title', { body});
		   notification.onclick = () => { 
		        notification.close();
		        window.parent.focus();
		   }
		}
		function requestAndShowPermission() {
		   Notification.requestPermission().then(function (permission) {
		   		console.log(permission);
		      if (permission === "granted") {
		            showNotification();
		      }else{
		      	alert("hii");
		      }
		   });
		}
	</script>
	
</body>
</html>